{"version":3,"file":"commonHelpers.js","sources":["../src/js/main.js"],"sourcesContent":["import axios from 'axios';\nimport iziToast from 'izitoast';\nimport SimpleLightbox from 'simplelightbox';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst form = document.getElementById('search-form');\nconst gallery = document.querySelector('.gallery');\nconst loadMoreButton = document.querySelector('.load-more');\n\nconst API_KEY = '44548622-5fd69a61f42bc3e999cbd3ef1';\nlet query = '';\nlet page = 1;\nconst perPage = 40;\nlet totalHits = 0;\nlet lightbox;\n\nform.addEventListener('submit', async (event) => {\n  event.preventDefault();\n  query = event.target.searchQuery.value.trim();\n  page = 1;\n  gallery.innerHTML = '';\n  loadMoreButton.style.visibility = 'hidden';\n\n  if (query === '') {\n    iziToast.warning({ title: 'Warning', message: 'Please enter a search query.' });\n    return;\n  }\n\n  try {\n    const response = await fetchImages(query, page, perPage);\n    totalHits = response.totalHits;\n    if (totalHits === 0) {\n      iziToast.info({ title: 'Info', message: 'Sorry, there are no images matching your search query. Please try again.' });\n      return;\n    }\n    iziToast.success({ title: 'Success', message: `Hooray! We found ${totalHits} images.` });\n    renderImages(response.hits);\n    if (response.hits.length < perPage) {\n      iziToast.info({ title: 'Info', message: \"We're sorry, but you've reached the end of search results.\" });\n    } else {\n      loadMoreButton.style.visibility = 'visible';\n    }\n  } catch (error) {\n    iziToast.error({ title: 'Error', message: 'Failed to fetch images. Please try again later.' });\n  }\n});\n\nloadMoreButton.addEventListener('click', async () => {\n  page += 1;\n  try {\n    const response = await fetchImages(query, page, perPage);\n    renderImages(response.hits, true);\n    if (page * perPage >= totalHits) {\n      loadMoreButton.style.visibility = 'hidden';\n      iziToast.info({ title: 'Info', message: \"We're sorry, but you've reached the end of search results.\" });\n    }\n  } catch (error) {\n    iziToast.error({ title: 'Error', message: 'Failed to load images. Please try again later.' });\n  }\n});\n\nasync function fetchImages(query, page, perPage) {\n  const response = await axios.get('https://pixabay.com/api/', {\n    params: {\n      key: API_KEY,\n      q: query,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n      page: page,\n      per_page: perPage,\n    },\n  });\n  return response.data;\n}\n\nfunction renderImages(images, shouldScroll = false) {\n  const markup = images.map(image => {\n    return `\n      <div class=\"photo-card\">\n        <a href=\"${image.largeImageURL}\" class=\"gallery-link\">\n          <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" loading=\"lazy\" />\n        </a>\n        <div class=\"info\">\n          <p class=\"info-item\"><b>Likes</b> ${image.likes}</p>\n          <p class=\"info-item\"><b>Views</b> ${image.views}</p>\n          <p class=\"info-item\"><b>Comments</b> ${image.comments}</p>\n          <p class=\"info-item\"><b>Downloads</b> ${image.downloads}</p>\n        </div>\n      </div>\n    `;\n  }).join('');\n  gallery.insertAdjacentHTML('beforeend', markup);\n  if (!lightbox) {\n    lightbox = new SimpleLightbox('.gallery a', { captionsData: 'alt', captionDelay: 250 });\n  } else {\n    lightbox.refresh();\n  }\n  if (shouldScroll) {\n    smoothScroll();\n  }\n}\n\nfunction smoothScroll() {\n  const { height: cardHeight } = document.querySelector(\".gallery\").firstElementChild.getBoundingClientRect();\n  window.scrollBy({\n    top: cardHeight * 2,\n    behavior: \"smooth\",\n  });\n}\n"],"names":["form","gallery","loadMoreButton","API_KEY","query","page","perPage","totalHits","lightbox","event","iziToast","response","fetchImages","renderImages","axios","images","shouldScroll","markup","image","SimpleLightbox","smoothScroll","cardHeight"],"mappings":"+vBAMA,MAAMA,EAAO,SAAS,eAAe,aAAa,EAC5CC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAiB,SAAS,cAAc,YAAY,EAEpDC,EAAU,qCAChB,IAAIC,EAAQ,GACRC,EAAO,EACX,MAAMC,EAAU,GAChB,IAAIC,EAAY,EACZC,EAEJR,EAAK,iBAAiB,SAAU,MAAOS,GAAU,CAO/C,GANAA,EAAM,eAAc,EACpBL,EAAQK,EAAM,OAAO,YAAY,MAAM,KAAI,EAC3CJ,EAAO,EACPJ,EAAQ,UAAY,GACpBC,EAAe,MAAM,WAAa,SAE9BE,IAAU,GAAI,CAChBM,EAAS,QAAQ,CAAE,MAAO,UAAW,QAAS,8BAA8B,CAAE,EAC9E,MACD,CAED,GAAI,CACF,MAAMC,EAAW,MAAMC,EAAYR,EAAOC,EAAMC,CAAO,EAEvD,GADAC,EAAYI,EAAS,UACjBJ,IAAc,EAAG,CACnBG,EAAS,KAAK,CAAE,MAAO,OAAQ,QAAS,0EAA0E,CAAE,EACpH,MACD,CACDA,EAAS,QAAQ,CAAE,MAAO,UAAW,QAAS,oBAAoBH,CAAS,UAAU,CAAE,EACvFM,EAAaF,EAAS,IAAI,EACtBA,EAAS,KAAK,OAASL,EACzBI,EAAS,KAAK,CAAE,MAAO,OAAQ,QAAS,4DAA4D,CAAE,EAEtGR,EAAe,MAAM,WAAa,SAErC,MAAe,CACdQ,EAAS,MAAM,CAAE,MAAO,QAAS,QAAS,iDAAiD,CAAE,CAC9F,CACH,CAAC,EAEDR,EAAe,iBAAiB,QAAS,SAAY,CACnDG,GAAQ,EACR,GAAI,CACF,MAAMM,EAAW,MAAMC,EAAYR,EAAOC,EAAMC,CAAO,EACvDO,EAAaF,EAAS,KAAM,EAAI,EAC5BN,EAAOC,GAAWC,IACpBL,EAAe,MAAM,WAAa,SAClCQ,EAAS,KAAK,CAAE,MAAO,OAAQ,QAAS,4DAA4D,CAAE,EAEzG,MAAe,CACdA,EAAS,MAAM,CAAE,MAAO,QAAS,QAAS,gDAAgD,CAAE,CAC7F,CACH,CAAC,EAED,eAAeE,EAAYR,EAAOC,EAAMC,EAAS,CAY/C,OAXiB,MAAMQ,EAAM,IAAI,2BAA4B,CAC3D,OAAQ,CACN,IAAKX,EACL,EAAGC,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,KAAMC,EACN,SAAUC,CACX,CACL,CAAG,GACe,IAClB,CAEA,SAASO,EAAaE,EAAQC,EAAe,GAAO,CAClD,MAAMC,EAASF,EAAO,IAAIG,GACjB;AAAA;AAAA,mBAEQA,EAAM,aAAa;AAAA,sBAChBA,EAAM,YAAY,UAAUA,EAAM,IAAI;AAAA;AAAA;AAAA,8CAGdA,EAAM,KAAK;AAAA,8CACXA,EAAM,KAAK;AAAA,iDACRA,EAAM,QAAQ;AAAA,kDACbA,EAAM,SAAS;AAAA;AAAA;AAAA,KAI9D,EAAE,KAAK,EAAE,EACVjB,EAAQ,mBAAmB,YAAagB,CAAM,EACzCT,EAGHA,EAAS,QAAO,EAFhBA,EAAW,IAAIW,EAAe,aAAc,CAAE,aAAc,MAAO,aAAc,GAAG,CAAE,EAIpFH,GACFI,GAEJ,CAEA,SAASA,GAAe,CACtB,KAAM,CAAE,OAAQC,CAAU,EAAK,SAAS,cAAc,UAAU,EAAE,kBAAkB,wBACpF,OAAO,SAAS,CACd,IAAKA,EAAa,EAClB,SAAU,QACd,CAAG,CACH"}